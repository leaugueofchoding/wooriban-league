// src/utils/profanityFilter.js

// 필터링할 금칙어 리스트
export const PROFANITY_LIST = [
    // --- 기본 욕설 ---
    '시발', '씨발', '쓰발', '시부랄', '씨부랄', '썅', '개새끼', '개새키', '개색기', '개색히',
    '병신', '빙신', '뷼신', '등신', '지랄', '존나', '졸라', '엿먹어', '염병',
    '대가리', '대갈통', '아가리', '아갈창', '꺼져', '닥쳐', '미친년', '미친놈', '미친새끼',

    // --- 성적 비하 및 음담패설 ---
    '새끼', '년', '놈', '창녀', '걸레', '보지', '자지', '섹스', '콘돔', '정액',
    '따먹', '따먹어', '강간', '변태', '발정', '성관계', '후장', '항문', '자위', '따머금',
    '딸딸이', '오르가즘', '사정', '유두', '클리', '팬티', '성기', '성폭행',
    '좆', '좇', '좃', '씹', '씹할', '씹창', '개씹', '좆까', '좆밥', '꼴려', '박아', '기모찌',

    // --- 패드립 (부모님 관련 비하) ---
    '니애미', '니애비', '느금마', '느개비', '느금', '엠창', '애미', '애비', '느검마',
    '니기미', '니미', '패드립', '후레자식',

    // --- 변형 및 초성 ---
    'ㅅㅂ', 'ㅆㅂ', 'ㅄ', 'ㅂㅅ', 'ㅈㄹ', 'ㅈㄴ', 'ㅅㄲ', 'ㄲㅈ', 'ㄷㅊ', 'ㅗ', '凸',
    '엠생', '관종', '한남', '김치녀', '맘충', '틀딱', '잼민이', '급식충',
    '느금', '응니애미', '응느금', '노무현', '운지',

    // --- 기타 공격적인 언어 ---
    '죽어', '죽여', '살인', '칼빵', '자살', '뛰어내려', '뒤질', '뒤져',
    '장애인', '애자', '찐따', '왕따'
];

/**
 * 텍스트 내의 금칙어를 필터링하여 마스킹 처리하는 함수
 * 변형된 욕설(예: 시.발, 시1발, ㅈ.ㄹ)도 자동으로 감지합니다.
 */
export const filterProfanity = (text) => {
    if (!text) return text;

    let filteredText = text;

    PROFANITY_LIST.forEach(word => {
        // 1. 글자 사이사이에 "숫자, 특수문자, 공백"이 0개 이상 들어가는 패턴 생성
        // 예: '시발' -> '시[\d\W_]*발' (시.발, 시1발, 시@#발 등 모두 매칭됨)
        const chars = word.split('');
        const pattern = chars.join('[\\d\\W_]*');

        // 'gi' 플래그: 대소문자 무시(i), 전체 검색(g)
        const regex = new RegExp(pattern, 'gi');

        // 감지된 단어 길이만큼 '*'로 변경
        filteredText = filteredText.replace(regex, (match) => '*'.repeat(match.length));
    });

    return filteredText;
};